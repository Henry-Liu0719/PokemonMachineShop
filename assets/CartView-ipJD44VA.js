import{_ as w,m as k,S as u,a as x,r as _,o as l,c as r,d as b,w as h,b as t,F as V,g as T,j as m,v as f,t as a,n as E,h as U}from"./index-ISSCsJ85.js";import{c as g}from"./cartStore-zZ1h7vi0.js";import{a as S}from"./axios-G2rPRu76.js";import{_ as $}from"./Animation - 1710557059960-SOXLnD8x.js";var B={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gopopov",VITE_POKEMON_API:"https://pokeapi.co/api/v2",BASE_URL:"/PokemonMachineShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:I,VITE_PATH:q}=B,L={data(){return{productId:"",num:1,couponCode:""}},mounted(){this.getCart()},methods:{...k(g,["getCart","deleteCart","updateCart"]),postCoupon(s){this.isUpdating=!0;const e={data:{code:`${s}`}};console.log(s),S.post(`${I}/api/${q}/coupon`,e).then(n=>{console.log(n),this.isUpdating=!1,this.getCart(),u.fire({title:"使用優惠券成功",icon:"success",timer:1e3,showConfirmButton:!1,showCancelButton:!1})}).catch(n=>{u.fire({position:"top-end",icon:"error",title:`${n.response.data.message}`,showConfirmButton:!1,timer:1e3}),console.dir(n),this.isUpdating=!1})}},computed:{...x(g,["carts","isCartsLoading"])},watch:{num(){this.num=this.num<1?1:this.num}}},N={class:"container"},O=t("img",{src:$,alt:"",class:"img-fluid"},null,-1),P={class:"mt-3"},R=t("h3",{class:"mt-3 mb-4"},"購物車",-1),A={class:"row"},D={class:"col-md-8"},M={class:"table"},j=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0"},"品名"),t("th",{scope:"col",class:"border-0"},"數量"),t("th",{scope:"col",class:"border-0"},"單價"),t("th",{scope:"col",class:"border-0"})])],-1),F={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},H=["src"],z={class:"mb-0 fw-bold ms-3 d-inline-block"},K={class:"border-0 align-middle",style:{"max-width":"160px"}},G={class:"input-group pe-5"},J={class:"input-group-prepend"},Q=["onClick"],W=t("i",{class:"bi bi-dash"},null,-1),X=[W],Y=["onUpdate:modelValue"],Z={class:"input-group-append"},tt=["onClick"],ot=t("i",{class:"bi bi-plus"},null,-1),st=[ot],et={class:"border-0 align-middle"},nt={class:"mb-0 ms-auto"},dt={class:"border-0 align-middle"},it=["onClick"],at={class:"input-group w-50 mb-3"},lt={class:"input-group-append"},rt=["disabled"],ct=t("i",{class:"bi bi-send"},null,-1),pt=[ct],ut={class:"col-md-4"},_t={class:"border p-4 mb-4"},bt=t("h4",{class:"fw-bold mb-4"},"訂單詳情",-1),ht={class:"d-flex justify-content-between mt-4"},mt=t("p",{class:"mb-0 h4 fw-bold"},"Total",-1),ft={class:"mb-0 h4 fw-bold"};function gt(s,e,n,vt,d,v){var c,p;const C=_("loadingOverlay"),y=_("router-link");return l(),r("div",N,[b(C,{active:s.isCartsLoading,"is-full-page":!0},{default:h(()=>[O]),_:1},8,["active"]),t("div",P,[R,t("div",A,[t("div",D,[t("table",M,[j,t("tbody",null,[(l(!0),r(V,null,T(s.carts.carts,o=>(l(),r("tr",{key:o.id,class:"border-bottom border-top"},[t("th",F,[t("img",{src:o.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,H),t("p",z,a(o.product.title)+" "+a(o.product.unit),1)]),t("td",K,[t("div",G,[t("div",J,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:i=>{o.qty--,s.updateCart(o,o.qty)}},X,8,Q)]),m(t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":i=>o.qty=i,readonly:""},null,8,Y),[[f,o.qty]]),t("div",Z,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:i=>{o.qty++,s.updateCart(o,o.qty)}},st,8,tt)])])]),t("td",et,[t("p",nt,"NT$"+a(o.total),1)]),t("td",dt,[t("i",{class:"bi bi-x",onClick:i=>s.deleteCart(o.id)},null,8,it)])]))),128))])]),t("div",at,[m(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"輸入優惠券gopopov即享50%折價","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[0]||(e[0]=o=>d.couponCode=o)},null,512),[[f,d.couponCode]]),t("div",lt,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=o=>v.postCoupon(d.couponCode)),disabled:d.couponCode===""},pt,8,rt)])])]),t("div",ut,[t("div",_t,[bt,t("div",ht,[mt,t("p",ft,"NT$"+a(s.carts.final_total),1)]),b(y,{to:"checkout",class:E(["btn btn-dark w-100 mt-4",{disabled:!((p=(c=s.carts)==null?void 0:c.carts)!=null&&p.length)}])},{default:h(()=>[U("送出訂單")]),_:1},8,["class"])])])])])])}const xt=w(L,[["render",gt]]);export{xt as default};
