import{a as b}from"./axios-G2rPRu76.js";import{_ as E,a as v,m as w,S as C,r as p,o as n,c as l,d as m,w as c,b as e,t as i,F as _,g as h,i as d,s as M,l as T}from"./index-A-FSPJml.js";import{S as A,a as O,A as V,P as q,N as B}from"./autoplay-jcFM9Fhr.js";import{p as P}from"./productStore-7XC7UCxk.js";import{p as x}from"./pokemonStore-pmvUc6dq.js";import{_ as S}from"./Animation - 1710557059960-SOXLnD8x.js";var I={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gopokemon",VITE_POKEMON_API:"https://pokeapi.co/api/v2",BASE_URL:"/PokemonMachineShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_POKEMON_API:L}=I,R={components:{Swiper:A,SwiperSlide:O},data(){return{modules:[V,q,B],autoplayConfig:{delay:1e3,disableOnInteraction:!1},paginationConfig:{clickable:!0},shuffledProducts:[],pokemon:{},imagesUrl:[],learnedMachines:[],isPokemonLoading:!0}},mounted(){this.init()},computed:{...v(P,["isProductsLoading","allProducts"]),...v(x,["typeNameList","typeColorList"])},watch:{},methods:{...w(P,["getAllProducts","isProductLoading"]),...w(x,["exportTypeNamesList","createTypeColorList"]),async init(){this.createTypeColorList(),await this.getAllProducts(),this.exportTypeNamesList(),await this.getPokemon(),this.getLearnedMachines()},async getPokemon(){this.isPokemonLoading=!0;try{const s=await b.get(`${L}/pokemon/${this.$route.query.id}`);this.pokemon=s.data,this.imagesUrl.push(s.data.sprites.front_default),this.imagesUrl.push(s.data.sprites.back_default),this.imagesUrl.push(s.data.sprites.front_female),this.imagesUrl.push(s.data.sprites.back_female),this.imagesUrl.push(s.data.sprites.front_shiny),this.imagesUrl.push(s.data.sprites.back_shiny),this.imagesUrl.push(s.data.sprites.front_shiny_female),this.imagesUrl.push(s.data.sprites.back_shiny_female),this.imagesUrl=this.imagesUrl.filter(a=>a);const r=await b.get(`${L}/pokemon-species/${this.$route.query.id}`);this.pokemon.description=r.data.flavor_text_entries[0].flavor_text,r.data.flavor_text_entries.forEach(a=>{a.language.name==="zh-Hant"&&(this.pokemon.description=a.flavor_text)})}catch(s){console.dir(s),C.fire({icon:"false",title:"讀取寶可夢失敗，請聯繫管理員",showConfirmButton:!1,timer:1e3})}finally{this.isPokemonLoading=!1}},getLearnedMachines(){this.learnedMachines=[],this.allProducts.products.forEach(s=>{var r;(r=s.pokemons)==null||r.forEach(a=>{a.name===this.$route.query.pokemonName&&this.learnedMachines.push(s)})})}}},D={class:"container"},z=e("img",{src:S,alt:"讀取中",class:"img-fluid"},null,-1),F={class:"row align-items-center"},H={class:"col-12 col-md-5 col-xl-4"},K=["src"],j={class:"col-12 col-md-6 col-xl-4 row ms-3"},$={"aria-label":"breadcrumb",class:"col-12"},G={class:"breadcrumb bg-white px-0 mb-0 py-3"},J=e("li",{class:"breadcrumb-item"},[e("a",{class:"text-muted",href:"./index.html"},"首頁")],-1),Q={class:"breadcrumb-item active","aria-current":"page"},W={class:"col-6"},X={class:"fw-bold h1 mb-1"},Y={class:"col-6"},Z={class:"h4 fw-bold /*text-end*/"},ee=e("br",null,null,-1),se={class:"h4 fw-bold /*text-end*/"},te=e("br",null,null,-1),oe={class:"h4 fw-bold /*text-end*/"},ie=e("br",null,null,-1),ae=e("div",{class:"row align-items-center"},[e("div",{class:"col-6"})],-1),ne={class:"col-12 col-xl-3"},re={class:"text-muted"},le={class:"row mt-5 vl-parent"},ce=e("h3",null,"該寶可夢可學習的招式機清單",-1),de=e("img",{src:S,alt:"讀取中",class:"img-fluid"},null,-1),me={class:"card border-0 mb-4"},pe=["src"],_e={class:"card-body text-center"},he={class:"d-flex justify-content-between"},ue={class:"card-text text-muted mb-0"};function fe(s,r,a,ge,t,ke){var g,k,y;const u=p("loadingOverlay"),U=p("swiper-slide"),N=p("swiper"),f=p("router-link");return n(),l("div",D,[m(u,{active:t.isPokemonLoading,"is-full-page":!0},{default:c(()=>[z]),_:1},8,["active"]),e("div",F,[e("div",H,[m(N,{spaceBetween:30,centeredSlides:!0,autoplay:t.autoplayConfig,pagination:t.paginationConfig,navigation:!0,modules:t.modules,class:"mySwiper"},{default:c(()=>[(n(!0),l(_,null,h(t.imagesUrl,o=>(n(),M(U,{key:o},{default:c(()=>[e("img",{src:o,class:"d-block w-100",alt:""},null,8,K)]),_:2},1024))),128))]),_:1},8,["autoplay","pagination","modules"])]),e("div",j,[e("nav",$,[e("ol",G,[J,e("li",Q,i(s.$route.query.pokemonName),1)])]),e("div",W,[e("h2",X,i(s.$route.query.pokemonName),1),(n(!0),l(_,null,h(t.pokemon.types,o=>(n(),l("span",{key:o.slot,class:"btn btn-dark w-50 py-2 border-0",style:T({"background-color":s.typeColorList[o.type.name]})},i(s.typeNameList[o.type.name]),5))),128))]),e("div",Y,[e("p",Z,[d("圖鑑編號："),ee,d(i((g=t.pokemon)==null?void 0:g.id),1)]),e("p",se,[d("身高："),te,d(i(((k=t.pokemon)==null?void 0:k.height)/10)+" 公尺",1)]),e("p",oe,[d("體重："),ie,d(i(((y=t.pokemon)==null?void 0:y.weight)/10)+" 公斤",1)])]),ae]),e("div",ne,[e("p",re,i(t.pokemon.description),1)])]),e("div",le,[ce,m(u,{active:s.isProductsLoading,"is-full-page":!0},{default:c(()=>[de]),_:1},8,["active"]),(n(!0),l(_,null,h(t.learnedMachines,o=>(n(),l("div",{class:"col-12 col-sm-4 col-md-3 col-lg-2 mt-md-4",key:o.id},[e("div",me,[m(f,{to:{path:"product",query:{id:o.id}}},{default:c(()=>[e("img",{src:o.imageUrl,class:"card-img-top rounded-100 rounded border border-1 border-secondary",alt:"pokemon.name"},null,8,pe)]),_:2},1032,["to"]),e("div",_e,[m(f,{to:{path:"pokemon",query:{id:t.pokemon.id}},class:"page-link text-primary"},{default:c(()=>[e("h4",null,i(o.unit),1)]),_:2},1032,["to"]),e("div",he,[e("p",ue,i(o.title),1)])])])]))),128))])])}const Le=E(R,[["render",fe]]);export{Le as default};
