import{_ as N,m as v,a as P,r as k,o as r,c as a,b as t,d as l,w as u,F as c,g as p,n,t as d,h as T}from"./index-CsqihBJw.js";import{p as w}from"./productStore-sYT3GIlE.js";import{p as O}from"./pokemonStore-ZYeJDd10.js";import{_ as L}from"./Animation - 1710557059960-SOXLnD8x.js";import"./axios-G2rPRu76.js";const A={data(){return{yOffset:0,filterdProducts:{},searchedProducts:{}}},components:{},methods:{...v(w,["openModal","addToCart","getAllProducts","filterType"]),...v(O,["exportTypeNamesList"]),async init(){const s=this.$route.query.category||"";await this.getAllProducts(1,0,s),this.exportTypeNamesList()},filterType(s="岩石"){this.filterdProducts.products=this.products.products.filter(i=>i.unit===s),window.scrollTo({top:this.yOffset,behavior:"smooth"})},createSearchedProducts(){const s=this.$route.query.keyWord;this.searchedProducts={success:!0,products:[],pagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1,category:""},messages:[]},this.searchedProducts.products=this.filterdProducts.products.filter(i=>i.description.includes(s)||i.unit.includes(s)),this.filterdProducts={...this.searchedProducts}}},mounted(){this.init(),this.yOffset=document.querySelector("div.container.mt-md-5.mt-3.mb-7 > div > div.col-8 > div > h4").getBoundingClientRect().top+window.pageYOffset},computed:{...P(w,["products","isProductsLoading"]),...P(O,["typeNameList"])},watch:{products(){this.filterdProducts={...this.products},this.$route.query.keyWord&&this.createSearchedProducts()}}},S=t("div",{class:"container"},null,-1),q={class:"container mt-md-5 mt-3 mb-7"},j=t("img",{src:L,alt:"",class:"img-fluid"},null,-1),B={class:"row"},V={class:"col-4"},E={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},W={class:"card border-0"},$=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"}," 屬性瀏覽 ")])],-1),F={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},z={class:"card-body py-0"},D={class:"list-unstyled"},M=["onClick"],R={class:"col-8"},U={class:"row"},Y={class:"card border-0 mb-4 position-relative position-relative"},G=["src"],H=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),I={class:"card-body p-0"},J={class:"mb-0 mt-3"},K={class:"card-text mb-0"},Q={class:"text-muted"},X=t("p",{class:"text-muted mt-3"},null,-1),Z={class:"d-flex justify-content-center"},tt={class:"pagination"},et={class:"page-item"},st=t("span",{"aria-hidden":"true"},"«",-1),ot=[st],it=["onClick"],rt={class:"page-item"},at=t("span",{"aria-hidden":"true"},"»",-1),dt=[at];function ct(s,i,nt,lt,o,ut){var _,m,g,f,b,y;const C=k("loadingOverlay"),h=k("router-link");return r(),a(c,null,[S,t("div",q,[l(C,{active:s.isProductsLoading,"is-full-page":!0},{default:u(()=>[j]),_:1},8,["active"]),t("div",B,[t("div",V,[t("div",E,[t("div",W,[$,t("div",F,[t("div",z,[t("ul",D,[(r(!0),a(c,null,p(Object.entries(s.typeNameList),e=>(r(),a("li",{key:e[0]},[t("button",{href:"#",class:"m-2 page-link py-2 d-block text-muted",onClick:x=>{s.isLoading=!0,s.getAllProducts(1,o.yOffset,e[1])}},d(e[1]),9,M)]))),128))])])])])])]),t("div",R,[t("div",U,[t("h4",{class:n(["opacity-0 mt-6",{"opacity-100":!((_=o.filterdProducts.products)!=null&&_.length)}])},"無相符的查詢結果",2),(r(!0),a(c,null,p(o.filterdProducts.products,e=>(r(),a("div",{class:"col-md-6",key:e.id},[t("div",Y,[l(h,{to:{path:"product",query:{id:e.id}}},{default:u(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-0 object-fit-contain position-relative",alt:"product.description",style:{width:"10rem",height:"10rem"}},null,8,G)]),_:2},1032,["to"]),H,t("div",I,[l(h,{to:{path:"product",query:{id:e.id}}},{default:u(()=>[t("h4",J,d(e.content)+" "+d(e.unit),1)]),_:2},1032,["to"]),t("p",K,[T("NT$"+d(e.price)+" ",1),t("span",Q,[t("del",null,"NT$"+d(e.origin_price),1)])]),X])])]))),128))]),t("nav",Z,[t("ul",tt,[t("li",et,[t("button",{class:n(["page-link",{disabled:!((g=(m=o.filterdProducts)==null?void 0:m.pagination)!=null&&g.has_pre)}]),"aria-label":"Previous",onClick:i[0]||(i[0]=e=>s.getAllProducts(s.products.pagination.current_page-1,o.yOffset))},ot,2)]),(r(!0),a(c,null,p((f=o.filterdProducts.pagination)==null?void 0:f.total_pages,e=>(r(),a("li",{class:n(["page-item",{active:o.filterdProducts.pagination.current_page==e}]),key:e},[t("button",{class:"page-link",onClick:x=>s.getAllProducts(e,o.yOffset)},d(e),9,it)],2))),128)),t("li",rt,[t("button",{class:n(["page-link",{disabled:!((y=(b=o.filterdProducts)==null?void 0:b.pagination)!=null&&y.has_next)}]),"aria-label":"Next",onClick:i[1]||(i[1]=e=>s.getAllProducts(s.products.pagination.current_page+1,o.yOffset))},dt,2)])])])])])])],64)}const ft=N(A,[["render",ct]]);export{ft as default};
