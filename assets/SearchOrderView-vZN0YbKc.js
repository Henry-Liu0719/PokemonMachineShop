import{a as T}from"./axios-G2rPRu76.js";import{_ as C,S as j,r as n,o as i,c as a,d as r,w as k,b as e,F as B,g as N,n as c,t as o}from"./index-ISSCsJ85.js";import{_ as P}from"./Animation - 1710557059960-SOXLnD8x.js";var D={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gopopov",VITE_POKEMON_API:"https://pokeapi.co/api/v2",BASE_URL:"/PokemonMachineShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:R,VITE_PATH:U}=D,A={data(){return{orderId:"",carts:{},order:{},isOrderLoading:!1}},mounted(){},methods:{minLength(d){return/^-/.test(d)?d.length===20?!0:"訂單號碼長度為20碼":"訂單號碼為「-」開頭"},getOrder(d){this.isOrderLoading=!0,T.get(`${R}/api/${U}/order/${d}`).then(t=>{console.log(t),t.data.order?(this.order=t.data.order,this.carts=this.order.products):j.fire({icon:"warning",title:"查無該筆訂單",showConfirmButton:!1,timer:1e3}),this.isOrderLoading=!1}).catch(t=>{j.fire({icon:"false",title:"讀取產品失敗，請聯繫管理員",showConfirmButton:!1,timer:1e3}),console.dir(t)})}},computed:{}},M={class:"container mt-md-5 mt-3 mb-7"},F=e("img",{src:P,alt:"",class:"img-fluid"},null,-1),H=e("div",{class:"col-md-10"},[e("label",{for:"orderId",class:"mb-0 form-label"},[e("h3",{class:"fw-bold mb-4 pt-3"},"查詢訂單")])],-1),K={class:"mt-0"},q={class:"mb-0"},z=e("span",null,"訂單號碼範例: -NtK1ICsM1uiXJyfF3m-",-1),J=["disabled"],X={class:"row mt-3 flex-row-reverse"},G={class:"col-lg-8 col-sm-6"},Q={class:"table"},W=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"border-0 ps-0"},"品名"),e("th",{scope:"col",class:"border-0"},"數量"),e("th",{scope:"col",class:"border-0"},"單價"),e("th",{scope:"col",class:"border-0"})])],-1),Y={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},Z=["src"],$={class:"mb-0 fw-bold ms-3 d-inline-block"},ee={class:"border-0 align-middle",style:{"max-width":"160px"}},se={class:"input-group pe-5"},te=["value"],oe={class:"border-0 align-middle"},le={class:"mb-0 ms-auto"},de={class:"col-lg-4 col-sm-6"},ne={class:"border p-4 mb-4"},re=e("h3",{class:"fw-bold mb-4"},"訂單詳情",-1),ce={class:"d-flex justify-content-between mt-4"},ie=e("p",{class:"mb-0 h4 fw-bold me-1"},"訂單日期",-1),ae={class:"d-flex justify-content-between mt-4"},_e=e("p",{class:"mb-0 h4 fw-bold me-1"},"訂單金額",-1),me={class:"d-flex justify-content-between mt-4"},he=e("p",{class:"mb-0 h4 fw-bold me-1"},"完成付款",-1),be={class:"d-flex justify-content-between mt-4"},pe=e("p",{class:"mb-0 h4 fw-bold me-1"},"收件人",-1),fe={class:"mb-0 h4 fw-bold"},ue={class:"d-flex justify-content-between mt-4"},we=e("p",{class:"mb-0 h4 fw-bold me-1"},"電話",-1),ge={class:"mb-0 h4 fw-bold"},ve={class:"d-flex justify-content-between mt-4"},ye=e("p",{class:"mb-0 h4 fw-bold me-1"},"地址",-1),xe={class:"mb-0 h4 fw-bold"},Oe={class:"d-flex justify-content-between mt-4"},Ie=e("p",{class:"mb-0 h4 fw-bold me-1"},"Email",-1),je={class:"mb-0 h4 fw-bold"},ke={class:"d-flex justify-content-between mt-4"},Ee=e("p",{class:"mb-0 h4 fw-bold me-1"},"備註",-1),Ve={class:"mb-0 h4 fw-bold"};function Le(d,t,Se,Te,s,_){var m,h,b,p,f,u,w,g,v,y,x,O;const E=n("loadingOverlay"),V=n("v-field"),L=n("error-message"),S=n("v-form");return i(),a("div",M,[r(E,{active:s.isOrderLoading,"is-full-page":!0},{default:k(()=>[F]),_:1},8,["active"]),H,e("div",K,[r(S,null,{default:k(({errors:l})=>[e("div",q,[r(V,{type:"email",class:c(["form-control",{"is-invalid":l.訂單號碼}]),id:"orderId","aria-describedby":"emailHelp",placeholder:"輸入訂單號碼，為「-」開頭的20碼英文數字",name:"訂單號碼",rules:_.minLength,modelValue:this.orderId,"onUpdate:modelValue":t[0]||(t[0]=I=>this.orderId=I)},null,8,["class","rules","modelValue"]),r(L,{name:"訂單號碼",class:"invalid-feedback"}),z]),e("button",{type:"button",class:"btn btn-dark mt-4 p-2 px-4",onClick:t[1]||(t[1]=I=>_.getOrder(this.orderId)),disabled:this.orderId===""||Object.keys(l).length>0},"送出查詢",8,J)]),_:1}),e("div",X,[e("div",G,[e("table",Q,[W,e("tbody",null,[(i(!0),a(B,null,N(s.carts,l=>(i(),a("tr",{key:l.id,class:"border-bottom border-top"},[e("th",Y,[e("img",{src:l.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,Z),e("p",$,o(l.product.title)+" "+o(l.product.unit),1)]),e("td",ee,[e("div",se,[e("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:l.qty,readonly:""},null,8,te)])]),e("td",oe,[e("p",le,"NT$"+o(l.total),1)])]))),128))])])]),e("div",de,[e("div",ne,[re,e("div",ce,[ie,e("p",{class:c(["mb-0 h4 fw-bold",{"d-none":Object.keys(s.order).length==0}])},o(new Date(((m=s.order)==null?void 0:m.create_at)*1e3).toLocaleString()),3)]),e("div",ae,[_e,e("p",{class:c(["mb-0 h4 fw-bold",{"d-none":Object.keys(s.order).length==0}])},"NT$"+o((h=s.order)==null?void 0:h.total),3)]),e("div",me,[he,e("p",{class:c(["mb-0 h4 fw-bold",{"d-none":Object.keys(s.order).length==0}])},o((b=s.order)!=null&&b.is_paid?"是":"否"),3)]),e("div",be,[pe,e("p",fe,o((f=(p=s.order)==null?void 0:p.user)==null?void 0:f.name),1)]),e("div",ue,[we,e("p",ge,o((w=(u=s.order)==null?void 0:u.user)==null?void 0:w.tel),1)]),e("div",ve,[ye,e("p",xe,o((v=(g=s.order)==null?void 0:g.user)==null?void 0:v.address),1)]),e("div",Oe,[Ie,e("p",je,o((x=(y=s.order)==null?void 0:y.user)==null?void 0:x.email),1)]),e("div",ke,[Ee,e("p",Ve,o((O=s.order)==null?void 0:O.message),1)])])])])])])}const Pe=C(A,[["render",Le]]);export{Pe as default};
