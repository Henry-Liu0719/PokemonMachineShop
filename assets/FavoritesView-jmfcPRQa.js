import{_ as T,a as g,p as y,m as w,S as m,r as k,o as i,c as a,d as h,e as _,b as t,j as p,F as x,g as F,i as S,t as n,k as C,h as N}from"./index-_rV0SiY7.js";import{f as B}from"./favoriteStore-i-vlCWUQ.js";import{_ as O}from"./Animation - 1710557059960-SOXLnD8x.js";const V={data(){return{filterdFavorites:[],yOffset:0,typeSelected:"全部",isFavoritesLoading:!0}},components:{},mounted(){this.init()},computed:{...g(y,["typeNameList"]),...g(B,["favorites"])},watch:{favorites(){this.isFavoritesLoading=!1,this.filterdFavorites=[...this.favorites]}},methods:{...w(y,["exportTypeNamesList"]),...w(B,["addToFavorites","removeFromFavorites","getFavorites"]),async init(){this.exportTypeNamesList()},filterType(s="全部"){window.scrollTo({top:this.yOffset,behavior:"smooth"}),this.filterdFavorites=s==="全部"?this.filterdFavorites=this.favorites:this.favorites.filter(o=>o.category===s),this.typeSelected=s},remove(s){const o=m.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});o.fire({title:`要將${s.unit}從收藏商品移除嗎?`,icon:"warning",showCancelButton:!0,confirmButtonText:"移除",cancelButtonText:"取消操作",reverseButtons:!0}).then(l=>{l.isConfirmed?(this.removeFromFavorites(s.id),m.fire({title:`${s.unit}已從收藏商品移除`,icon:"success",timer:1e3,showConfirmButton:!1,showCancelButton:!1})):l.dismiss===m.DismissReason.cancel&&o.fire({title:"操作已取消",icon:"warning"})})}}},j={class:"container"},E=t("img",{src:O,alt:"讀取中",class:"img-fluid"},null,-1),R={class:"row"},$={class:"col-12 col-sm-4 col-md-3 order-last order-sm-first"},q={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},D={class:"card border-0 mx-3"},z=t("div",{class:"card-header px-0 py-4 bg-light border-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",null,[t("h3",{class:"mb-0 text-center"},[S(" 屬性瀏覽 "),t("i",{class:"bi bi-chevron-down"})])])],-1),A={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},M={class:"py-0"},U={class:"list-group"},W=["onClick"],G={class:"col-12 col-sm-8 col-md-9"},H={class:"row"},I=t("h4",{class:"opacity-0 mt-6"},"對齊產品列表版面使用，不顯示",-1),J={class:"card border-0 mb-4 position-relative position-relative"},K=["src","alt","title"],P=t("i",{class:"bi bi-heart"},null,-1),Q=t("span",{class:"visually-hidden"},"unread messages",-1),X=[P,Q],Y=["onClick"],Z=t("i",{class:"bi bi-heart"},null,-1),tt=t("span",{class:"visually-hidden"},"unread messages",-1),et=[Z,tt],st={class:"card-body p-0 bg-light"},ot={class:"mb-0 mt-3"},it={class:"card-text mb-0"},at={class:"text-muted"},rt={key:0},nt=t("p",{class:"text-muted mt-3"},null,-1);function lt(s,o,l,ct,r,c){var u;const L=k("loadingOverlay"),b=k("RouterLink");return i(),a("div",j,[h(L,{active:r.isFavoritesLoading,"is-full-page":!0},{default:_(()=>[E]),_:1},8,["active"]),t("div",R,[t("div",$,[t("div",q,[t("div",D,[z,t("div",A,[t("div",M,[t("ul",U,[t("button",{type:"button",href:"#",class:"page-link fs-5",onClick:o[0]||(o[0]=e=>c.filterType("全部"))},[t("li",{class:p(["list-group-item py-2 px-2",r.typeSelected=="全部"?"active":"bg-light"])}," 瀏覽全部 ",2)]),(i(!0),a(x,null,F(Object.entries(s.typeNameList),e=>(i(),a("button",{type:"button",href:"#",class:"page-link fs-5",key:e[0]},[t("li",{onClick:d=>c.filterType(e[1]),class:p(["list-group-item py-2 px-2",r.typeSelected==e[1]?"active":"bg-light"])},n(e[1]),11,W)]))),128))])])])])])]),t("div",G,[t("div",H,[t("h4",{class:p(["opacity-0 mt-6",{"opacity-100":!((u=r.filterdFavorites)!=null&&u.length)}])},"尚未收藏任何商品",2),I,(i(!0),a(x,null,F(r.filterdFavorites,e=>{var d,v;return i(),a("div",{class:"col-12 col-md-4 col-lg-3",key:e.id},[t("div",J,[h(b,{to:{path:"product",query:{id:e.id}}},{default:_(()=>[t("img",{src:e.imageUrl,class:"card-img-top object-fit-contain position-relative rounded border border-1 border-secondary",alt:e.description,style:{width:"100%"},title:e.description},null,8,K)]),_:2},1032,["to"]),t("span",null,[s.favorites.some(f=>f.id===e.id)?(i(),a("button",{key:1,type:"button",class:"position-absolute top-0 start-100 badge bg-primary border-0",style:{transform:"translate(-100%, 0)",width:"3rem",height:"1.5rem","border-radius":"0 0.375rem"},onClick:C(f=>c.remove(e),["prevent"])},et,8,Y)):(i(),a("button",{key:0,type:"button",class:"position-absolute top-0 start-100 badge bg-secondary border-0",style:{transform:"translate(-100%, 0)",width:"3rem",height:"1.5rem","border-radius":"0 0.375rem"},onClick:o[1]||(o[1]=C(()=>{},["prevent"]))},X))]),t("div",st,[h(b,{to:{path:"product",query:{id:e.id}},style:{"text-decoration":"none"}},{default:_(()=>[t("h4",ot,n(e.content)+" "+n(e.unit),1)]),_:2},1032,["to"]),t("p",it,[S("NT$"+n((d=e.price)==null?void 0:d.toLocaleString())+" ",1),t("span",at,[e.price!=e.origin_price?(i(),a("del",rt,"NT$"+n((v=e.origin_price)==null?void 0:v.toLocaleString()),1)):N("",!0)])]),nt])])])}),128))])])])])}const _t=T(V,[["render",lt]]);export{_t as default};
