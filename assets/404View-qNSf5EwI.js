import{_ as m,m as i,S as e,k as l,a as u,o as p,c as h,b as c}from"./index-RUF9gL7e.js";import{c as d}from"./cartStore-xvW-lkNm.js";import{u as f}from"./utilStore-5tq1A9x0.js";var _={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"popovgo",VITE_POKEMON_API:"https://pokeapi.co/api/v2",BASE_URL:"/PokemonMachineShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:g,VITE_PATH:$}=_,b={data(){return{orderData:{data:{user:{name:"testName",email:"test@gmail.com",tel:"0912346768",address:"Kaohsiung"},message:"這是留言"}}}},mounted(){this.getCart()},methods:{...i(d,["getCart"]),...i(f,["copyTextToClipboard"]),isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"},postOrder(){const t={...this.orderData},o=e.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});o.fire({title:`請確認以下資訊
Email：${t.data.user.email}
姓名：${t.data.user.name}
電話：${t.data.user.tel}
地址：${t.data.user.address}`,text:"點擊送出後將完成交易",icon:"warning",showCancelButton:!0,confirmButtonText:"完成交易",cancelButtonText:"回到結帳頁面",reverseButtons:!0}).then(r=>{r.isConfirmed?l.post(`${g}/api/${$}/order`,t).then(s=>{this.copyTextToClipboard(s.data.orderId);let n;e.fire({title:`${s.data.message}
訂單編號：${s.data.orderId}
自動複製到剪貼簿`,html:"<b></b>秒後回到產品列表",timer:3e3,timerProgressBar:!0,didOpen:()=>{e.showLoading();const a=e.getPopup().querySelector("b");n=setInterval(()=>{a.textContent=`${Math.ceil(e.getTimerLeft()/1e3)}`},100)},willClose:()=>{clearInterval(n)}}).then(a=>{a.dismiss,e.DismissReason.timer}).then(()=>{this.$router.push("/products")})}).catch(s=>{console.dir(s),e.fire({position:"top-end",icon:"false",title:"送出訂單失敗，請聯繫管理員",showConfirmButton:!1,timer:1e3})}):r.dismiss===e.DismissReason.cancel&&o.fire({title:"訂單資料未送出",icon:"warning"})})}},computed:{...u(d,["carts"])},watch:{}},B={class:"container mt-md-5 mt-3 mb-7 d-flex justify-content-center align-items-center",style:{height:"45vh"}},T=c("div",{class:""},[c("h2",null,"無此頁面，點擊上方導覽列前往其他頁面吧!")],-1),v=[T];function x(t,o,r,s,n,a){return p(),h("div",B,v)}const w=m(b,[["render",x]]);export{w as default};
