import{_ as B,a as v,m as y,S as m,r as g,o as i,c as r,b as t,d as h,w as p,n as _,F as b,g as w,t as n,j as x,i as S}from"./index-AlI_uR_g.js";import{p as k}from"./pokemonStore-o87opL41.js";import{f as F}from"./favoriteStore-CIQg13ks.js";import{_ as T}from"./Animation - 1710557059960-SOXLnD8x.js";import"./axios-G2rPRu76.js";const O={data(){return{filterdFavorites:[],yOffset:0,typeSelected:"全部",isFavoritesLoading:!0}},components:{},mounted(){this.init(),this.yOffset=document.querySelector("div.container.mt-md-5.mt-3.mb-7 > div > div.col-8 > div > h4").getBoundingClientRect().top+window.pageYOffset},computed:{...v(k,["typeNameList"]),...v(F,["favorites"])},watch:{favorites(){this.isFavoritesLoading=!1,this.filterdFavorites=[...this.favorites]}},methods:{...y(k,["exportTypeNamesList"]),...y(F,["addToFavorites","removeFromFavorites","getFavorites"]),async init(){this.exportTypeNamesList()},filterType(s="全部"){window.scrollTo({top:this.yOffset,behavior:"smooth"}),this.filterdFavorites=s==="全部"?this.filterdFavorites=this.favorites:this.favorites.filter(o=>o.category===s),this.typeSelected=s},remove(s){const o=m.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});o.fire({title:`要將${s.unit}從收藏商品移除嗎?`,icon:"warning",showCancelButton:!0,confirmButtonText:"移除",cancelButtonText:"取消操作",reverseButtons:!0}).then(l=>{l.isConfirmed?(this.removeFromFavorites(s.id),m.fire({title:`${s.unit}已從收藏商品移除`,icon:"success",timer:1e3,showConfirmButton:!1,showCancelButton:!1})):l.dismiss===m.DismissReason.cancel&&o.fire({title:"操作已取消",icon:"warning"})})}}},N=t("div",{class:"container"},null,-1),L={class:"container mt-md-5 mt-3 mb-7"},j=t("img",{src:T,alt:"",class:"img-fluid"},null,-1),V={class:"row"},q={class:"col-4"},E={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},$={class:"card border-0"},D=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"}," 屬性瀏覽 ")])],-1),R={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},z={class:"card-body py-0"},A={class:"list-unstyled"},M=["onClick"],U={class:"col-8"},W={class:"row"},Y={class:"card border-0 mb-4 position-relative position-relative"},G=["src","alt","title"],H=t("i",{class:"bi bi-heart"},null,-1),I=t("span",{class:"visually-hidden"},"unread messages",-1),J=[H,I],K=["onClick"],P=t("i",{class:"bi bi-heart"},null,-1),Q=t("span",{class:"visually-hidden"},"unread messages",-1),X=[P,Q],Z={class:"card-body p-0"},tt={class:"mb-0 mt-3"},et={class:"card-text mb-0"},st={class:"text-muted"},ot=t("p",{class:"text-muted mt-3"},null,-1);function it(s,o,l,rt,a,d){var f;const C=g("loadingOverlay"),u=g("router-link");return i(),r(b,null,[N,t("div",L,[h(C,{active:a.isFavoritesLoading,"is-full-page":!0},{default:p(()=>[j]),_:1},8,["active"]),t("div",V,[t("div",q,[t("div",E,[t("div",$,[D,t("div",R,[t("div",z,[t("ul",A,[t("li",null,[t("button",{href:"#",class:_(["m-1 page-link py-1 px-2 d-block text-mute",{"text-primary rounded border border-primary":a.typeSelected=="全部"}]),onClick:o[0]||(o[0]=e=>d.filterType("全部"))},"瀏覽全部",2)]),(i(!0),r(b,null,w(Object.entries(s.typeNameList),e=>(i(),r("li",{key:e[0]},[t("button",{href:"#",class:_(["m-1 page-link py-1 px-2 d-block text-muted",{"text-primary rounded border border-primary":a.typeSelected==e[1]}]),onClick:c=>d.filterType(e[1])},n(e[1]),11,M)]))),128))])])])])])]),t("div",U,[t("div",W,[t("h4",{class:_(["opacity-0 mt-6",{"opacity-100":!((f=a.filterdFavorites)!=null&&f.length)}])},"尚未收藏任何商品",2),(i(!0),r(b,null,w(a.filterdFavorites,e=>(i(),r("div",{class:"col-12 col-md-4 col-lg-3",key:e.id},[t("div",Y,[h(u,{to:{path:"product",query:{id:e.id}}},{default:p(()=>[t("img",{src:e.imageUrl,class:"card-img-top object-fit-contain position-relative rounded border border-1 border-secondary",alt:e.description,style:{width:"100%"},title:e.description},null,8,G)]),_:2},1032,["to"]),t("span",null,[s.favorites.some(c=>c.id===e.id)?(i(),r("button",{key:1,type:"button",class:"position-absolute top-0 start-100 badge bg-primary border-0",style:{transform:"translate(-100%, 0)",width:"3rem",height:"1.5rem","border-radius":"0 0.375rem"},onClick:x(c=>d.remove(e),["prevent"])},X,8,K)):(i(),r("button",{key:0,type:"button",class:"position-absolute top-0 start-100 badge bg-secondary border-0",style:{transform:"translate(-100%, 0)",width:"3rem",height:"1.5rem","border-radius":"0 0.375rem"},onClick:o[1]||(o[1]=x(()=>{},["prevent"]))},J))]),t("div",Z,[h(u,{to:{path:"product",query:{id:e.id}},style:{"text-decoration":"none"}},{default:p(()=>[t("h4",tt,n(e.content)+" "+n(e.unit),1)]),_:2},1032,["to"]),t("p",et,[S("NT$"+n(e.price)+" ",1),t("span",st,[t("del",null,"NT$"+n(e.origin_price),1)])]),ot])])]))),128))])])])])],64)}const mt=B(O,[["render",it]]);export{mt as default};
