import{_ as P,l as B,S as V,r,o as i,c,d as a,e as E,b as e,F as D,g as M,j as _,t,h as R}from"./index-_rV0SiY7.js";import{_ as U}from"./Animation - 1710557059960-SOXLnD8x.js";var A={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"popovgo",VITE_POKEMON_API:"https://pokeapi.co/api/v2",BASE_URL:"/PokemonMachineShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:H,VITE_PATH:F}=A,q={data(){return{orderId:"",carts:{},order:{},isOrderLoading:!1}},mounted(){},methods:{minLength(d){return/^-/.test(d)?d.length===20?!0:"訂單號碼長度為20碼":"訂單號碼為「-」開頭"},getOrder(d){this.isOrderLoading=!0,B.get(`${H}/api/${F}/order/${d}`).then(o=>{o.data.order?(this.order=o.data.order,this.carts=this.order.products):V.fire({icon:"warning",title:"查無該筆訂單",showConfirmButton:!1,timer:1e3})}).catch(o=>{V.fire({icon:"false",title:"讀取產品失敗，請聯繫管理員",showConfirmButton:!1,timer:1e3}),console.dir(o)}).finally(()=>{this.isOrderLoading=!1})}},computed:{}},z={class:"container mt-md-5 mt-3 mb-7"},K=e("img",{src:U,alt:"讀取中",class:"img-fluid"},null,-1),Q=e("div",{class:"col-md-10"},[e("label",{for:"orderId",class:"mb-0 form-label"},[e("h3",{class:"fw-bold mb-4 pt-3"},"查詢訂單")])],-1),G={class:"mt-0"},J={class:"mb-0"},W=e("span",null,"訂單號碼範例： -Nv644NM1-bO-LPQafn0",-1),X=["disabled"],Y={key:0,class:"row mt-3"},Z={class:"col-12 col-lg-6 col-xxl-8"},$={class:"table"},ee=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"border-0 ps-0 bg-light"},"品名"),e("th",{scope:"col",class:"border-0 bg-light"},"數量"),e("th",{scope:"col",class:"border-0 bg-light"},"單價"),e("th",{scope:"col",class:"border-0 bg-light"})])],-1),se={scope:"row",class:"border-0 bg-light px-0 font-weight-normal py-4"},te=["src"],oe={class:"mb-0 fw-bold ms-3 d-inline-block"},le={class:"border-0 bg-light align-middle",style:{"max-width":"160px"}},de={class:"input-group pe-5"},ne=["value"],re={class:"border-0 bg-light align-middle"},ie={class:"mb-0 ms-auto"},ce={class:"col-12 col-lg-6 col-xxl-4"},ae={class:"border p-4 mb-4"},_e=e("h3",{class:"fw-bold mb-4"},"訂單詳情",-1),he={class:"d-flex justify-content-between mt-4"},me=e("p",{class:"mb-0 h4 fw-bold me-1"},"訂單日期",-1),be={class:"d-flex justify-content-between mt-4"},pe=e("p",{class:"mb-0 h4 fw-bold me-1"},"訂單金額",-1),fe={class:"d-flex justify-content-between mt-4"},ue=e("p",{class:"mb-0 h4 fw-bold me-1"},"完成付款",-1),ge={class:"d-flex justify-content-between mt-4"},we=e("p",{class:"mb-0 h4 fw-bold me-1"},"收件人",-1),ve={class:"mb-0 h4 fw-bold"},ye={class:"d-flex justify-content-between mt-4"},xe=e("p",{class:"mb-0 h4 fw-bold me-1"},"電話",-1),Oe={class:"mb-0 h4 fw-bold"},je={class:"d-flex justify-content-between mt-4"},ke=e("p",{class:"mb-0 h4 fw-bold me-1"},"地址",-1),Le={class:"mb-0 h4 fw-bold"},Ie={class:"d-flex justify-content-between mt-4"},Ve=e("p",{class:"mb-0 h4 fw-bold me-1"},"Email",-1),Ee={class:"mb-0 h4 fw-bold"},Se={class:"d-flex justify-content-between mt-4"},Te=e("p",{class:"mb-0 h4 fw-bold me-1"},"備註",-1),Ne={class:"mb-0 h4 fw-bold"};function Ce(d,o,Pe,Be,s,h){var m,b,p,f,u,g,w,v,y,x,O,j,k,L,I;const S=r("loadingOverlay"),T=r("v-field"),N=r("error-message"),C=r("v-form");return i(),c("div",z,[a(S,{active:s.isOrderLoading,"is-full-page":!0},{default:E(()=>[K]),_:1},8,["active"]),Q,e("div",G,[a(C,null,{default:E(({errors:l})=>[e("div",J,[a(T,{type:"email",class:_(["form-control-lg col-12",{"is-invalid":l.訂單號碼}]),id:"orderId","aria-describedby":"emailHelp",placeholder:"輸入訂單號碼，為「-」開頭的20碼英文數字",name:"訂單號碼",rules:h.minLength,modelValue:this.orderId,"onUpdate:modelValue":o[0]||(o[0]=n=>this.orderId=n)},null,8,["class","rules","modelValue"]),a(N,{name:"訂單號碼",class:"invalid-feedback"}),W]),e("button",{type:"button",class:"btn btn-primary mt-4 p-2 px-4",onClick:o[1]||(o[1]=n=>h.getOrder(this.orderId)),disabled:this.orderId===""||Object.keys(l).length>0},"送出查詢",8,X)]),_:1}),((m=Object.keys(s.order))==null?void 0:m.length)!==0?(i(),c("div",Y,[e("div",Z,[e("table",$,[ee,e("tbody",null,[(i(!0),c(D,null,M(s.carts,l=>{var n;return i(),c("tr",{key:l.id,class:"border-bottom border-top"},[e("th",se,[e("img",{src:l.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,te),e("p",oe,t(l.product.title)+" "+t(l.product.unit),1)]),e("td",le,[e("div",de,[e("input",{type:"text",class:"form-control border-0 bg-light text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:l.qty,readonly:""},null,8,ne)])]),e("td",re,[e("p",ie,"NT$"+t((n=l.total)==null?void 0:n.toLocaleString()),1)])])}),128))])])]),e("div",ce,[e("div",ae,[_e,e("div",he,[me,e("p",{class:_(["mb-0 h4 fw-bold",{"d-none":Object.keys(s.order).length==0}])},t((p=new Date(((b=s.order)==null?void 0:b.create_at)*1e3))==null?void 0:p.toLocaleString()),3)]),e("div",be,[pe,e("p",{class:_(["mb-0 h4 fw-bold",{"d-none":Object.keys(s.order).length==0}])},"NT$"+t((u=Math.floor((f=s.order)==null?void 0:f.total))==null?void 0:u.toLocaleString()),3)]),e("div",fe,[ue,e("p",{class:_(["mb-0 h4 fw-bold",{"d-none":Object.keys(s.order).length==0}])},t((g=s.order)!=null&&g.is_paid?"是":"否"),3)]),e("div",ge,[we,e("p",ve,t((v=(w=s.order)==null?void 0:w.user)==null?void 0:v.name),1)]),e("div",ye,[xe,e("p",Oe,t((x=(y=s.order)==null?void 0:y.user)==null?void 0:x.tel),1)]),e("div",je,[ke,e("p",Le,t((j=(O=s.order)==null?void 0:O.user)==null?void 0:j.address),1)]),e("div",Ie,[Ve,e("p",Ee,t((L=(k=s.order)==null?void 0:k.user)==null?void 0:L.email),1)]),e("div",Se,[Te,e("p",Ne,t((I=s.order)==null?void 0:I.message),1)])])])])):R("",!0)])])}const Re=P(q,[["render",Ce]]);export{Re as default};
