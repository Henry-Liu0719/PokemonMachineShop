import{_ as x,m as T,S as f,a as E,r as g,o as n,c as d,d as c,w as p,b as t,h as v,F as S,g as U,k as C,v as y,t as r,n as $,i as B}from"./index-A-FSPJml.js";import{c as w}from"./cartStore-lbm91aPk.js";import{a as I}from"./axios-G2rPRu76.js";import{_ as N}from"./Animation - 1710557059960-SOXLnD8x.js";var q={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gopokemon",VITE_POKEMON_API:"https://pokeapi.co/api/v2",BASE_URL:"/PokemonMachineShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:L,VITE_PATH:O}=q,P={data(){return{productId:"",num:1,couponCode:""}},mounted(){this.getCart()},methods:{...T(w,["getCart","deleteCart","updateCart"]),postCoupon(s){this.isUpdating=!0;const e={data:{code:`${s}`}};I.post(`${L}/api/${O}/coupon`,e).then(a=>{this.getCart(),f.fire({title:"使用優惠券成功",icon:"success",timer:1e3,showConfirmButton:!1,showCancelButton:!1})}).catch(a=>{f.fire({position:"top-end",icon:"error",title:`${a.response.data.message}`,showConfirmButton:!1,timer:1e3}),console.dir(a)}).finally(()=>{this.isUpdating=!1})}},computed:{...E(w,["carts","isCartsLoading"])},watch:{num(){this.num=this.num<1?1:this.num}}},R={class:"container"},A=t("img",{src:N,alt:"讀取中",class:"img-fluid"},null,-1),D={class:"mt-3"},M=t("h3",{class:"mt-3 mb-4"},"購物車",-1),j={key:0,class:"p-0 container d-flex"},F=t("h4",{class:"my-auto"},"購物車無商品",-1),H=t("div",{class:"my-auto"},"瀏覽產品",-1),z={key:1,class:"row"},K={class:"col-md-8"},G={class:"table"},J=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0"},"品名"),t("th",{scope:"col",class:"border-0"},"數量"),t("th",{scope:"col",class:"border-0"},"單價"),t("th",{scope:"col",class:"border-0"})])],-1),Q={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},W=["src"],X={class:"mb-0 fw-bold ms-3 d-inline-block"},Y={class:"border-0 align-middle",style:{"max-width":"160px"}},Z={class:"input-group pe-5"},tt={class:"input-group-prepend"},ot=["onClick"],st=t("i",{class:"bi bi-dash"},null,-1),et=[st],nt=["onUpdate:modelValue"],dt={class:"input-group-append"},at=["onClick"],it=t("i",{class:"bi bi-plus"},null,-1),lt=[it],rt={class:"border-0 align-middle"},ct={class:"mb-0 ms-auto"},pt={class:"border-0 align-middle"},ut=["onClick"],_t={class:"input-group w-50 mb-3"},ht={class:"input-group-append"},bt=["disabled"],mt=t("i",{class:"bi bi-send"},null,-1),ft=[mt],gt={class:"col-md-4"},vt={class:"border p-4 mb-4"},Ct=t("h4",{class:"fw-bold mb-4"},"訂單詳情",-1),yt={class:"d-flex justify-content-between mt-4"},wt=t("p",{class:"mb-0 h4 fw-bold"},"Total",-1),kt={class:"mb-0 h4 fw-bold"};function Vt(s,e,a,xt,i,k){var _,h,b,m;const V=g("loadingOverlay"),u=g("router-link");return n(),d("div",R,[c(V,{active:s.isCartsLoading,"is-full-page":!0},{default:p(()=>[A]),_:1},8,["active"]),t("div",D,[M,(_=s.carts.carts)!=null&&_.length?v("",!0):(n(),d("div",j,[F,c(u,{class:"btn btn-danger rounded w-auto mx-2",to:"products"},{default:p(()=>[H]),_:1})])),(h=s.carts.carts)!=null&&h.length?(n(),d("div",z,[t("div",K,[t("table",G,[J,t("tbody",null,[(n(!0),d(S,null,U(s.carts.carts,o=>(n(),d("tr",{key:o.id,class:"border-bottom border-top"},[t("th",Q,[t("img",{src:o.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,W),t("p",X,r(o.product.title)+" "+r(o.product.unit),1)]),t("td",Y,[t("div",Z,[t("div",tt,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:l=>{o.qty--,s.updateCart(o,o.qty)}},et,8,ot)]),C(t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":l=>o.qty=l,readonly:""},null,8,nt),[[y,o.qty]]),t("div",dt,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:l=>{o.qty++,s.updateCart(o,o.qty)}},lt,8,at)])])]),t("td",rt,[t("p",ct,"NT$"+r(o.total),1)]),t("td",pt,[t("i",{class:"bi bi-x",onClick:l=>s.deleteCart(o.id)},null,8,ut)])]))),128))])]),t("div",_t,[C(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"輸入優惠券gopopov即享50%折價","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[0]||(e[0]=o=>i.couponCode=o)},null,512),[[y,i.couponCode]]),t("div",ht,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=o=>k.postCoupon(i.couponCode)),disabled:i.couponCode===""},ft,8,bt)])])]),t("div",gt,[t("div",vt,[Ct,t("div",yt,[wt,t("p",kt,"NT$"+r(s.carts.final_total),1)]),c(u,{to:"checkout",class:$(["btn btn-dark w-100 mt-4",{disabled:!((m=(b=s.carts)==null?void 0:b.carts)!=null&&m.length)}])},{default:p(()=>[B("送出訂單")]),_:1},8,["class"])])])])):v("",!0)])])}const $t=x(P,[["render",Vt]]);export{$t as default};
