import{_ as T,m as v,a as k,r as w,o as i,c as d,b as t,d as l,w as u,F as a,g as p,n,i as L,t as c,h as q}from"./index-mXxXtYF9.js";import{p as O}from"./productStore-7wOQCENm.js";import{p as C}from"./pokemonStore-mDuRMKW3.js";import{_ as S}from"./Animation - 1710557059960-SOXLnD8x.js";import"./axios-G2rPRu76.js";const V={data(){return{yOffset:0,filterdProducts:{},searchedProducts:{}}},components:{},methods:{...v(O,["openModal","addToCart","getProducts","filterType","getAllProducts"]),...v(C,["exportTypeNamesList"]),async init(){const s=this.$route.query.category||"";await this.getProducts(1,0,s),this.exportTypeNamesList()},filterType(s="岩石"){this.filterdProducts.products=this.products.products.filter(r=>r.unit===s),window.scrollTo({top:this.yOffset,behavior:"smooth"})},async createSearchedProducts(){const s=this.$route.query.keyWord;console.log("this.filterdProducts",this.filterdProducts),this.searchedProducts={success:!0,products:[],pagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1,category:""},messages:[]},this.searchedProducts.products=this.filterdProducts.products.filter(r=>r.description.includes(s)||r.unit.includes(s)),console.log("this.searchedProducts",this.searchedProducts),this.filterdProducts={...this.searchedProducts}}},mounted(){this.init(),this.yOffset=document.querySelector("div.container.mt-md-5.mt-3.mb-7 > div > div.col-8 > div > h4").getBoundingClientRect().top+window.pageYOffset},computed:{...k(O,["products","isProductsLoading","allProducts"]),...k(C,["typeNameList"])},watch:{async products(){this.filterdProducts={...this.products},this.$route.query.keyWord&&await this.getAllProducts()},allProducts(){this.filterdProducts={...this.allProducts},this.createSearchedProducts()}}},j=t("div",{class:"container"},null,-1),B={class:"container mt-md-5 mt-3 mb-7"},W=t("img",{src:S,alt:"",class:"img-fluid"},null,-1),A={class:"row"},E={class:"col-4"},$={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},F={class:"card border-0"},z=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"}," 屬性瀏覽 ")])],-1),D={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},M={class:"card-body py-0"},R={class:"list-unstyled"},U=["onClick"],Y={class:"col-8"},G={class:"row"},H={class:"card border-0 mb-4 position-relative position-relative"},I=["src"],J=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),K={class:"card-body p-0"},Q={class:"mb-0 mt-3"},X={class:"card-text mb-0"},Z={class:"text-muted"},tt=t("p",{class:"text-muted mt-3"},null,-1),et={key:0,class:"d-flex justify-content-center"},st={class:"pagination"},ot={class:"page-item"},rt=t("span",{"aria-hidden":"true"},"«",-1),it=[rt],dt=["onClick"],ct={class:"page-item"},at=t("span",{"aria-hidden":"true"},"»",-1),nt=[at];function lt(s,r,ut,pt,o,ht){var _,m,g,f,y,b,P;const x=w("loadingOverlay"),h=w("router-link");return i(),d(a,null,[j,t("div",B,[l(x,{active:s.isProductsLoading,"is-full-page":!0},{default:u(()=>[W]),_:1},8,["active"]),t("div",A,[t("div",E,[t("div",$,[t("div",F,[z,t("div",D,[t("div",M,[t("ul",R,[(i(!0),d(a,null,p(Object.entries(s.typeNameList),e=>(i(),d("li",{key:e[0]},[t("button",{href:"#",class:"m-2 page-link py-2 d-block text-muted",onClick:N=>{this.$route.query.keyWord="",s.isLoading=!0,s.getProducts(1,o.yOffset,e[1])}},c(e[1]),9,U)]))),128))])])])])])]),t("div",Y,[t("div",G,[t("h4",{class:n(["opacity-0 mt-6",{"opacity-100":!((_=o.filterdProducts.products)!=null&&_.length)}])},"無相符的查詢結果",2),(i(!0),d(a,null,p(o.filterdProducts.products,e=>(i(),d("div",{class:"col-md-6",key:e.id},[t("div",H,[l(h,{to:{path:"product",query:{id:e.id}}},{default:u(()=>[t("img",{src:e.imageUrl,class:"card-img-top object-fit-contain position-relative rounded border border-1 border-secondary",alt:"product.description",style:{width:"10rem",height:"10rem"}},null,8,I)]),_:2},1032,["to"]),J,t("div",K,[l(h,{to:{path:"product",query:{id:e.id}},style:{"text-decoration":"none"}},{default:u(()=>[t("h4",Q,c(e.content)+" "+c(e.unit),1)]),_:2},1032,["to"]),t("p",X,[q("NT$"+c(e.price)+" ",1),t("span",Z,[t("del",null,"NT$"+c(e.origin_price),1)])]),tt])])]))),128))]),!((m=o.filterdProducts)!=null&&m.length)==0?(i(),d("nav",et,[t("ul",st,[t("li",ot,[t("button",{class:n(["page-link",{disabled:!((f=(g=o.filterdProducts)==null?void 0:g.pagination)!=null&&f.has_pre)}]),"aria-label":"Previous",onClick:r[0]||(r[0]=e=>s.getProducts(s.products.pagination.current_page-1,o.yOffset))},it,2)]),(i(!0),d(a,null,p((y=o.filterdProducts.pagination)==null?void 0:y.total_pages,e=>(i(),d("li",{class:n(["page-item",{active:o.filterdProducts.pagination.current_page==e}]),key:e},[t("button",{class:"page-link",onClick:N=>s.getProducts(e,o.yOffset)},c(e),9,dt)],2))),128)),t("li",ct,[t("button",{class:n(["page-link",{disabled:!((P=(b=o.filterdProducts)==null?void 0:b.pagination)!=null&&P.has_next)}]),"aria-label":"Next",onClick:r[1]||(r[1]=e=>s.getProducts(s.products.pagination.current_page+1,o.yOffset))},nt,2)])])])):L("",!0)])])])],64)}const bt=T(V,[["render",lt]]);export{bt as default};
